<%- include('../partials/header.ejs')%>

<main class="container-fluid">
    <div class="container">
        <div class="form-modern">
            <div class="text-center mb-4">
                <i class="fas fa-edit fa-3x text-primary mb-3"></i>
                <h2>Edit Group Therapy</h2>
                <p class="text-muted">Update your group therapy information</p>
            </div>

            <form action='/events/<%= event._id%>?_method=PUT' enctype="multipart/form-data" method='POST'>
                <div class="mb-3">
                    <label for="category" class="form-label">
                        <i class="fas fa-tag me-2"></i>Category
                    </label>
                    <select id="category" name="category" class="form-select" required>
                        <option disabled>Select a category</option>
                        <% if(event.category==='anxiety' ) { %>
                            <option value="anxiety" selected>Anxiety</option>
                        <% }else{ %>
                            <option value="anxiety">Anxiety</option>
                        <%}%>
                        <% if(event.category==='depression' ) { %>
                            <option value="depression" selected>Depression</option>
                        <% }else{ %>
                            <option value="depression">Depression</option>
                        <%}%>
                        <% if(event.category==='trauma' ) { %>
                            <option value="trauma" selected>Trauma</option>
                        <% }else{ %>
                            <option value="trauma">Trauma</option>
                        <%}%>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="title" class="form-label">
                        <i class="fas fa-heading me-2"></i>Title
                    </label>
                    <input type="text" class="form-control" id="title" name="title" 
                           placeholder="Enter group therapy title" value="<%=event.title%>" required>
                </div>

                <div class="mb-3">
                    <label for="detail" class="form-label">
                        <i class="fas fa-align-left me-2"></i>Details
                    </label>
                    <textarea class="form-control" id="detail" name="detail" rows="5" 
                              placeholder="Describe the group therapy session" required><%=event.detail%></textarea>
                </div>

                <div class="mb-3">
                    <label for="location" class="form-label">
                        <i class="fas fa-map-marker-alt me-2"></i>Location
                    </label>
                    <input type="text" class="form-control" id="location" name="location" 
                           placeholder="Enter location" value="<%=event.location%>" required>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="startDate" class="form-label">
                            <i class="fas fa-calendar-alt me-2"></i>Start Date & Time
                        </label>
                        <input type="datetime-local" class="form-control" id="startDate" name="startDate"
                               value="<%=event.startDate%>" required>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="endDate" class="form-label">
                            <i class="fas fa-calendar-times me-2"></i>End Date & Time
                        </label>
                        <input type="datetime-local" class="form-control" id="endDate" name="endDate"
                               value="<%=event.endDate%>" required>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="image" class="form-label">
                        <i class="fas fa-image me-2"></i>Event Image
                    </label>
                    <input class="form-control" type="file" id="image" name="image" accept="image/*">
                    <small class="text-muted">Leave empty to keep current image</small>
                </div>

                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-modern btn-primary">
                        <i class="fas fa-save me-2"></i>Update Group Therapy
                    </button>
                    <a href="/events/<%=event._id%>" class="btn btn-outline-secondary">
                        <i class="fas fa-times me-2"></i>Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</main>

<%- include('../partials/footer.ejs')%>